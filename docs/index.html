<!DOCTYPE html>
<head>
    <script src="http://localhost:8000/public/client.js"></script>
</head>
<body>
    <button onclick="post()">Post a message</button>
    <button onclick="logon()">Logon</button>
    <button onclick="logout()">logout</button>
    <button onclick="send(JSON.stringify({message:'youpi'}))">send</button>
<script>
const logout = window.gatewayClient.logout;
const logon = window.gatewayClient.logon;
const send = stuff => window.gatewayClient.socket.send(stuff);

const post = async () => {
    const response = await fetch(`http://localhost:8004/longrunningstuff`, {
        method: "POST",
        mode: "cors", // no-cors, *cors, same-origin
        cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
        credentials: "same-origin", // include, *same-origin, omit
        headers: {
            "Content-Type": "application/json",
            "x-registration-id": window.gatewayClient.registrationId(),
        },
        redirect: "follow"
    });
    return response.json();
};

window.gatewayClient.logon();
// setTimeout(() => post(), 500);

</script>
</body>